<!DOCTYPE html>
<html lang="el">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   chat-project
  </title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&amp;display=swap" rel="stylesheet"/>
  <link href='data:image/svg+xml,&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"&gt;&lt;rect width="32" height="32" rx="6" fill="%231b2d5a"/&gt;&lt;text x="50%" y="62%" text-anchor="middle" font-size="18" fill="%23ffffff" font-family="Inter,Arial"&gt;💬&lt;/text&gt;&lt;/svg&gt;' rel="icon"/>
  <link href="css/styles.css" rel="stylesheet"/>
 </head>
 <body>
  <!-- AUTH -->
  <div class="authwrap" id="auth" style="display:none">
   <div class="authcard">
    <div class="title">
     Welcome to chat-project
    </div>
    <div class="small" style="margin-top:6px">
     Register / Login (email δεν φαίνεται) ή Anonymous.
    </div>
    <div class="grid" style="margin-top:12px">
     <div class="vstack">
      <div class="title" style="font-size:15px">
       Register
      </div>
      <input id="regUsername" placeholder="Username (π.χ. MysteryMan)" type="text"/>
      <input id="regEmail" placeholder="Email" type="email"/>
      <input id="regPass" placeholder="Password" type="password"/>
      <button class="btn primary" id="btnRegister">
       Create account
      </button>
      <div class="err" id="regErr">
      </div>
     </div>
     <div class="vstack">
      <div class="title" style="font-size:15px">
       Login
      </div>
      <input id="logEmail" placeholder="Email" type="email"/>
      <input id="logPass" placeholder="Password" type="password"/>
      <button class="btn" id="btnLogin">
       Sign in
      </button>
      <button class="btn ghost" id="btnAnon">
       Continue as Anonymous
      </button>
      <button class="btn ghost" id="btnForgot">
       Forgot my password
      </button>
      <div class="err" id="logErr">
      </div>
     </div>
    </div>
    <div class="divider">
    </div>
    <div class="small">
     Για admin: βάλε στο DB
     <code>
      roles/admins/&lt;UID&gt;: true
     </code>
     για το account του
     <b>
      MysteryMan
     </b>
     .
    </div>
   </div>
  </div>
  <!-- APP -->
  <div class="app" id="app" style="display:none">
   <!-- LEFT -->
   <div class="col" id="left">
    <header>
     <h2>
      Rooms
     </h2>
     <span class="badge" id="roleBadge">
      User
     </span>
    </header>
    <div class="list" id="roomsList">
    </div>
    <div id="roomActions">
     <button class="btn danger" id="btnClearRoom">
      🧹 Clear messages
     </button>
     <button class="btn danger" id="btnDeleteRoom">
      🗑 Delete room
     </button>
    </div>
    <div style="padding:10px;border-top:1px solid #232a3a">
     <input id="newRoomName" placeholder="New room name..."/>
     <button class="btn primary" id="btnCreateRoom" style="margin-top:8px;width:100%">
      Create Room
     </button>
    </div>
    <div id="diag">
     <div>
      <strong>
       Diagnostics
      </strong>
     </div>
     <code class="kv">
      connected:
      <span id="diagConnected">
       unknown
      </span>
     </code>
     <code class="kv">
      you:
      <span id="diagUid">
       -
      </span>
     </code>
     <code class="kv">
      isAdmin:
      <span id="diagAdmin">
       -
      </span>
     </code>
    </div>
   </div>
   <!-- CENTER -->
   <div class="col" id="center">
    <header>
     <h2 id="roomTitle">
      Select a room
     </h2>
    </header>
    <div id="typingBanner">
    </div>
    <div id="messages">
    </div>
    <div class="replyPreview" id="replyPreview">
     <span id="replyLabel">
     </span>
     <span class="close" id="replyClose">
      ×
     </span>
    </div>
    <div id="composer">
     <button class="iconbtn" id="btnEmoji" title="Emoji">
      😊
     </button>
     <button class="iconbtn" id="btnGif" title="GIF">
      GIF
     </button>
     <input disabled="" id="msgInput" placeholder="Write a message..."/>
     <button class="btn primary" disabled="" id="btnSend">
      Send
     </button>
    </div>
    <!-- Emoji -->
    <div class="pop" id="emojiPop">
     <div class="emoji-grid" id="emojiGrid">
     </div>
    </div>
    <!-- GIF -->
    <div class="pop gif-panel" id="gifPop">
     <div class="gif-head">
      <input id="gifSearch" placeholder="Search GIFs… (π.χ. dance)" type="text"/>
      <button class="btn" id="gifGo">
       Search
      </button>
     </div>
     <div class="gif-grid" id="gifGrid">
     </div>
     <div class="gif-empty" id="gifEmpty" style="display:none">
      No results.
     </div>
     <div class="small" style="margin-top:6px;opacity:.6)">
      Powered by GIPHY
     </div>
    </div>
    <!-- Reactions picker -->
    <div class="pop" id="reactPop">
     <div class="emoji-grid" id="reactGrid">
     </div>
    </div>
   </div>
   <!-- RIGHT -->
   <div class="col" id="right">
    <header>
     <h2>
      Users
     </h2>
     <div style="display:flex;gap:8px;align-items:center">
      <button class="btn" id="btnProfile">
       Profile
      </button>
      <button class="btn" id="btnSignOut">
       Sign out
      </button>
     </div>
    </header>
    <div class="hint">
    </div>
    <div class="list" id="usersList">
     <div class="small" style="opacity:.8">
      Loading…
     </div>
    </div>
   </div>
   <!-- Menus -->
   <div class="ctx" id="ctxUser">
    <div class="item" data-action="addFriend">
     ➕ Add friend
    </div>
    <div class="item" data-action="removeFriend">
     ➖ Remove friend
    </div>
    <div class="item" data-action="block">
     🚫 Block
    </div>
    <div class="item" data-action="unblock">
     ✅ Unblock
    </div>
    <div class="item danger adminOnly" data-action="kickRoom">
     ⛔ Kick (room)
    </div>
    <div class="item danger adminOnly" data-action="banGlobal">
     ⛔ Ban (global)
    </div>
    <div class="item adminOnly" data-action="unbanAll">
     ✅ Unban
    </div>
    <div class="item">
     On:
     <span id="ctxUserName" style="opacity:.8">
     </span>
    </div>
   </div>
   <div class="ctx" id="ctxMsg">
    <div class="item danger" data-action="delMsg">
     🗑 Delete message
    </div>
    <div class="item">
     From:
     <span id="ctxMsgFrom" style="opacity:.8">
     </span>
    </div>
   </div>
  </div>
  <!-- Firebase compat -->
  <!-- Firebase v8 (σταθερό) -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js">
  </script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js">
  </script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js">
  </script>
  <!-- Profile Modal -->
  <div class="modal" id="profileModal" style="display:none">
   <div class="authcard">
    <div class="title">
     Ρυθμίσεις Προφίλ
    </div>
    <div class="vstack" style="margin-top:10px">
     <label class="small">
      Όνομα χρήστη
     </label>
     <input id="profileName" placeholder="π.χ. MysteryMan" type="text"/>
     <label class="small" style="margin-top:8px">
      Avatar URL (.png/.jpg/.gif)
     </label>
     <input id="profileAvatar" placeholder="https://i.pravatar.cc/150?u=uid" type="text"/>
     <!-- Preview + Randomize -->
     <div class="row" style="display:flex;align-items:center;gap:8px;margin-top:10px">
      <img alt="avatar preview" height="48" id="avatarPreview" style="border-radius:50%;border:1px solid #2b3350;object-fit:cover;" width="48"/>
      <button class="btn" id="btnAvatarRandom" type="button">
       Randomize
      </button>
     </div>
     <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
      <button class="btn primary" id="btnSaveProfile">
       Αποθήκευση
      </button>
      <button class="btn" id="btnCloseProfile">
       Κλείσιμο
      </button>
     </div>
    </div>
   </div>
   <!DOCTYPE html>
   <html lang="el">
    <head>
     <meta charset="utf-8"/>
     <meta content="width=device-width, initial-scale=1" name="viewport"/>
     <title>
      chat-project
     </title>
     <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&amp;display=swap" rel="stylesheet"/>
     <link href='data:image/svg+xml,&lt;svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"&gt;&lt;rect width="32" height="32" rx="6" fill="%231b2d5a"/&gt;&lt;text x="50%" y="62%" text-anchor="middle" font-size="18" fill="%23ffffff" font-family="Inter,Arial"&gt;💬&lt;/text&gt;&lt;/svg&gt;' rel="icon"/>
     <link href="css/styles.css" rel="stylesheet"/>
    </head>
    <body>
     <!-- AUTH -->
     <!-- APP -->
     <!-- Firebase compat -->
     <!-- Firebase v8 (σταθερό) -->
     <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js">
     </script>
     <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js">
     </script>
     <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js">
     </script>
     <!-- Profile Modal -->
     
      <script type="module" src="js/app.js"></script>
</body>
   </html>
  </div>
 </body>
</html>
